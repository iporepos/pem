
<!DOCTYPE html>


<html lang="en" data-content_root="./" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>pem.risk module &#8212; pem 0.0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'risk';</script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="development.html" />
    <link rel="prev" title="API" href="api.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">pem 0.0.1 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="about.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="usage.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="development.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/iporepos/pem" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="index.html">
    Home
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="about.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="usage.html">
    User Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="api.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="development.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/iporepos/pem" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">pem.risk module</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="api.html" class="nav-link">API</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">pem.risk module</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-pem.risk">
<span id="pem-risk-module"></span><span id="risk"></span><h1>pem.risk module<a class="headerlink" href="#module-pem.risk" title="Link to this heading">#</a></h1>
<p>Module for pre- and post-processing routines supporting the Habitat Risk Index workflow.</p>
<p>This module provides a collection of helper functions for organizing, rasterizing, and
reprojecting spatial data layers used in the InVEST Habitat Risk model. It is intended
to be executed within the <strong>QGIS Python environment</strong> and relies on its processing framework
(<cite>processing</cite> algorithms, CRS handling, rasterization utilities, etc.).</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Refer to the <a class="reference external" href="https://naturalcapitalproject.stanford.edu/invest/habitat-risk-assessment">InVEST Habitat Risk model</a>
documentation for theoretical and technical details regarding input data
preparation for the Habitat Risk Index.</p>
</div>
<p><strong>Requirements</strong></p>
<p>The following libraries and environment are required:</p>
<ul class="simple">
<li><p>QGIS 3 (Python environment)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geopandas</span></code></p></li>
</ul>
<p><strong>Overview</strong></p>
<p>This module includes routines for:</p>
<ul class="simple">
<li><p>Preparing and rasterizing stressor and habitat layers.</p></li>
<li><p>Reprojecting rasters and generating blank templates.</p></li>
<li><p>Splitting vector datasets into grouped layers.</p></li>
<li><p>Creating structured, time-stamped output directories for reproducible runs.</p></li>
</ul>
<p>Each function performs a self-contained processing step designed to integrate
smoothly with other spatial workflows in QGIS.</p>
<p><strong>Examples</strong></p>
<p>Scripted usage examples are provided in the docstrings of each function.
No global examples are included at module level.</p>
<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.compute_risk_index">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">compute_risk_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raster_hra_benthic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raster_hra_pelagic</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#compute_risk_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.compute_risk_index" title="Link to this definition">#</a></dt>
<dd><p>Computes a final risk index raster by applying fuzzy logic to benthic and pelagic Human Risk Assessment (HRA) rasters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_output</strong> (<em>str</em>) – The path to the main output folder where a new run-specific subfolder will be created.</p></li>
<li><p><strong>raster_hra_benthic</strong> (<em>str</em>) – Full path to the input benthic HRA raster.</p></li>
<li><p><strong>raster_hra_pelagic</strong> (<em>str</em>) – Full path to the input pelagic HRA raster.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the run-specific output folder containing the resulting risk index rasters.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>The function executes the following steps:
1.  Creates a unique run output subfolder within <code class="docutils literal notranslate"><span class="pre">folder_output</span></code>.
2.  <strong>Fuzzifies</strong> both the benthic and pelagic HRA rasters using <code class="docutils literal notranslate"><span class="pre">util_fuzzify_raster</span></code> with a lower bound of 0 and an upper bound calculated from the <strong>99th percentile</strong> of each raster (<code class="docutils literal notranslate"><span class="pre">use_percentiles=True</span></code>). This produces <code class="docutils literal notranslate"><span class="pre">risk_b.tif</span></code> and <code class="docutils literal notranslate"><span class="pre">risk_p.tif</span></code>.
3.  <strong>Sums</strong> the original (non-fuzzified) benthic and pelagic HRA rasters using QGIS’s raster calculator (<code class="docutils literal notranslate"><span class="pre">native:rastercalc</span></code>) to create an intermediate sum raster (<code class="docutils literal notranslate"><span class="pre">hra_sum.tif</span></code>).
4.  <strong>Fuzzifies</strong> the resulting sum raster (<code class="docutils literal notranslate"><span class="pre">hra_sum.tif</span></code>) using the same 0 to 99th percentile bounds to produce the final <strong>Risk Index raster</strong> (<code class="docutils literal notranslate"><span class="pre">risk.tif</span></code>).
The final risk index raster (<code class="docutils literal notranslate"><span class="pre">risk.tif</span></code>) represents the combined and normalized risk.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.setup_hra_model">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">setup_hra_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_criteria</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aoi_layer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">habitat_layer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">habitat_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">habitat_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stressor_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_crs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'5641'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#setup_hra_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.setup_hra_model" title="Link to this definition">#</a></dt>
<dd><p>Sets up all necessary input layers and data structures for the HRA (Habitat Risk Assessment) model run.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This script is a utility for running the <a class="reference external" href="https://naturalcapitalproject.stanford.edu/invest/habitat-risk-assessment">InVEST Habitat Risk model</a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_output</strong> (<em>str</em>) – Path to the main output directory where all generated files will be stored.</p></li>
<li><p><strong>file_criteria</strong> (<em>str</em>) – Path to criteria table for habitat sensitivity</p></li>
<li><p><strong>input_db</strong> (<em>str</em>) – Path to the GeoPackage file containing the input vector layers.</p></li>
<li><p><strong>reference_raster</strong> (<em>str</em>) – Path to the raster used as a spatial template for model rasters.</p></li>
<li><p><strong>resolution</strong> (<em>float</em>) – The target spatial resolution (pixel size) for the model outputs.</p></li>
<li><p><strong>aoi_layer</strong> (<em>str</em>) – The name of the vector layer in <code class="docutils literal notranslate"><span class="pre">input_db</span></code> defining the Area of Interest (AOI).</p></li>
<li><p><strong>habitat_layer</strong> (<em>str</em>) – The name of the vector layer in <code class="docutils literal notranslate"><span class="pre">input_db</span></code> containing the habitat features.</p></li>
<li><p><strong>habitat_field</strong> (<em>str</em>) – The name of the field in <code class="docutils literal notranslate"><span class="pre">habitat_layer</span></code> used to classify habitats into groups.</p></li>
<li><p><strong>habitat_groups</strong> (<em>dict</em>) – A dictionary defining how habitats are grouped and processed.</p></li>
<li><p><strong>stressor_groups</strong> (<em>dict</em>) – A dictionary defining the stressor layers and their properties.</p></li>
<li><p><strong>dst_crs</strong> (<em>str</em>) – The EPSG code for the destination Coordinate Reference System (CRS). Default value = <code class="docutils literal notranslate"><span class="pre">5641</span></code></p></li>
<li><p><strong>suffix</strong> (<em>str</em>) – String suffix for model runs</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the newly created main output folder for the model run.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>This function prepares the environment by creating output folders,
reprojecting the AOI, creating a blank reference raster,
and running <code class="docutils literal notranslate"><span class="pre">setup_habitats</span></code> and <code class="docutils literal notranslate"><span class="pre">setup_stressors</span></code> to
prepare those inputs. It also generates a combined <code class="docutils literal notranslate"><span class="pre">info.csv</span></code> table.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The following script is expected to be executed under the QGIS Python
Environment with <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> installed.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># WARNING: run this in QGIS Python Environment</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">importlib.util</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">iu</span>

<span class="c1"># define the paths to this module</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">the_module</span> <span class="o">=</span> <span class="s2">&quot;path/to/risk.py&quot;</span>

<span class="n">spec</span> <span class="o">=</span> <span class="n">iu</span><span class="o">.</span><span class="n">spec_from_file_location</span><span class="p">(</span><span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="n">the_module</span><span class="p">)</span>
<span class="n">module</span> <span class="o">=</span> <span class="n">iu</span><span class="o">.</span><span class="n">module_from_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
<span class="n">spec</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">exec_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

<span class="c1"># define the paths to input and output folders</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">input_dir</span> <span class="o">=</span> <span class="s2">&quot;path/to/dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s2">&quot;path/to/dir&quot;</span>

<span class="c1"># define the path to input database</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">input_db</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">input_dir</span><span class="si">}</span><span class="s2">/pem.gpkg&quot;</span>

<span class="c1"># define criteria table</span>
<span class="n">criteria_table</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">input_dir</span><span class="si">}</span><span class="s2">/criteria_ben_pem.csv&quot;</span>

<span class="c1"># define reference raster</span>
<span class="n">reference_raster</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">input_dir</span><span class="si">}</span><span class="s2">/gebco_topobathymetry.tif&quot;</span>

<span class="c1"># organize habitat groups</span>
<span class="n">habitat_groups</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Habitat group</span>
    <span class="s2">&quot;MB3_MC3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MB3&quot;</span><span class="p">,</span> <span class="s2">&quot;MC3&quot;</span><span class="p">],</span>  <span class="c1"># list of habitats names</span>
    <span class="s2">&quot;MB4_MB5_MB6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MB4&quot;</span><span class="p">,</span> <span class="s2">&quot;MB5&quot;</span><span class="p">,</span> <span class="s2">&quot;MB6&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MC4_MC5_MC6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MC4&quot;</span><span class="p">,</span> <span class="s2">&quot;MC5&quot;</span><span class="p">,</span> <span class="s2">&quot;MC6&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MD3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MD3&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MD4_MD5_MD6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MD4&quot;</span><span class="p">,</span> <span class="s2">&quot;MD5&quot;</span><span class="p">,</span> <span class="s2">&quot;MD6&quot;</span><span class="p">],</span>
    <span class="s2">&quot;ME1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ME1&quot;</span><span class="p">],</span>
    <span class="s2">&quot;ME4_MF4_MF5&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ME4&quot;</span><span class="p">,</span> <span class="s2">&quot;MF4&quot;</span><span class="p">,</span> <span class="s2">&quot;MF5&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MG4_MG6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MG4&quot;</span><span class="p">,</span> <span class="s2">&quot;MG6&quot;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># organize stressors groups</span>
<span class="n">stressor_groups</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># stressor name</span>
    <span class="s2">&quot;MINERACAO&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1"># list of layers in input database</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mineracao_processos&quot;</span><span class="p">,</span> <span class="s2">&quot;mineracao_areas_potenciais&quot;</span><span class="p">],</span>
        <span class="s2">&quot;buffer&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span> <span class="c1"># in meters</span>
    <span class="p">},</span>
    <span class="s2">&quot;TURISMO&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;turismo_atividades_esportivas_sul&quot;</span><span class="p">],</span>
        <span class="s2">&quot;buffer&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;EOLICAS&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;eolico_parques&quot;</span><span class="p">],</span>
        <span class="s2">&quot;buffer&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># call the function</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">folder_output</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">setup_hra_model</span><span class="p">(</span>
    <span class="n">folder_output</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
    <span class="n">file_criteria</span><span class="o">=</span><span class="n">criteria_table</span><span class="p">,</span>
    <span class="n">input_db</span><span class="o">=</span><span class="n">input_db</span><span class="p">,</span>
    <span class="n">reference_raster</span><span class="o">=</span><span class="n">reference_raster</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="c1"># in meters</span>
    <span class="n">aoi_layer</span><span class="o">=</span><span class="s2">&quot;sul&quot;</span><span class="p">,</span>
    <span class="n">habitat_layer</span><span class="o">=</span><span class="s2">&quot;habitats_bentonicos_sul_v2&quot;</span><span class="p">,</span>
    <span class="n">habitat_field</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
    <span class="n">habitat_groups</span><span class="o">=</span><span class="n">habitat_groups</span><span class="p">,</span>
    <span class="n">stressor_groups</span><span class="o">=</span><span class="n">stressor_groups</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.setup_stressors">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">setup_stressors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subfolder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#setup_stressors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.setup_stressors" title="Link to this definition">#</a></dt>
<dd><p>Sets up stressor layers by rasterizing multiple vector layers from a
database into single stressor rasters and reprojecting them to a specified resolution.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This script is a utility for running the <a class="reference external" href="https://naturalcapitalproject.stanford.edu/invest/habitat-risk-assessment">InVEST Habitat Risk model</a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_output</strong> (<em>str</em>) – The base directory where a new run-specific folder for all outputs will be created.</p></li>
<li><p><strong>input_db</strong> (<em>str</em>) – The path to the source vector database (e.g., GeoPackage) containing the stressor layers.</p></li>
<li><p><strong>groups</strong> (<em>dict</em>) – A dictionary defining the stressor groups. Keys are the desired output stressor names (e.g., <code class="docutils literal notranslate"><span class="pre">Coastal_Pollution</span></code>), and values are dictionaries containing two keys: <code class="docutils literal notranslate"><span class="pre">layers</span></code> (a list of vector layer names to be combined) and <code class="docutils literal notranslate"><span class="pre">buffer</span></code> (the required buffer distance in meters for subsequent analysis).</p></li>
<li><p><strong>reference_raster</strong> (<em>str</em>) – The path to a raster file whose extent, CRS, and other properties will be used as a template for the output stressor rasters.</p></li>
<li><p><strong>is_blank</strong> (<em>bool</em>) – [optional] If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <code class="docutils literal notranslate"><span class="pre">reference_raster</span></code> is assumed to be a blank (zero-valued) template already, skipping the internal blanking step. Default value = False</p></li>
<li><p><strong>resolution</strong> (<em>float</em>) – The desired resolution (cell size) for the final output stressor rasters. Default value = 400</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the newly created run-specific output folder containing the stressor rasters and metadata.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>This function combines features from multiple vector layers into a single output stressor raster for each defined group.</p>
<ol class="arabic simple">
<li><p><strong>Template Raster:</strong> If <code class="docutils literal notranslate"><span class="pre">is_blank</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, a blank raster is generated from the <code class="docutils literal notranslate"><span class="pre">reference_raster</span></code> to serve as the template.</p></li>
<li><p><strong>Rasterization Loop:</strong> For each group, the template raster is copied, and all vector layers listed under the group’s <code class="docutils literal notranslate"><span class="pre">layers</span></code> key are sequentially rasterized onto the copy using a burn value of 1 (features are present).</p></li>
<li><p><strong>Reprojection:</strong> The resulting raster is reprojected to the desired <code class="docutils literal notranslate"><span class="pre">resolution</span></code> (and default CRS of 5641).</p></li>
<li><p><strong>Metadata:</strong> An <code class="docutils literal notranslate"><span class="pre">info_stressors.csv</span></code> file is created, detailing the name, file path, and required <strong>STRESSOR BUFFER (meters)</strong> for each generated stressor raster.</p></li>
</ol>
<p>Intermediate rasters are cleaned up at the end.</p>
<p><strong>Script example</strong></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The following script is expected to be executed under the QGIS Python
Environment with <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> installed.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># WARNING: run this in QGIS Python Environment</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">importlib.util</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">iu</span>

<span class="c1"># define the paths to this module</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">the_module</span> <span class="o">=</span> <span class="s2">&quot;path/to/risk.py&quot;</span>

<span class="n">spec</span> <span class="o">=</span> <span class="n">iu</span><span class="o">.</span><span class="n">spec_from_file_location</span><span class="p">(</span><span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="n">the_module</span><span class="p">)</span>
<span class="n">module</span> <span class="o">=</span> <span class="n">iu</span><span class="o">.</span><span class="n">module_from_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
<span class="n">spec</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">exec_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

<span class="c1"># define the paths to input and output folders</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">input_dir</span> <span class="o">=</span> <span class="s2">&quot;path/to/dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s2">&quot;path/to/dir&quot;</span>

<span class="c1"># define the path to input database</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">input_db</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">input_dir</span><span class="si">}</span><span class="s2">/pem.gpkg&quot;</span>

<span class="c1"># organize stressors groups</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;MINERACAO&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mineracao_processos&quot;</span><span class="p">,</span> <span class="s2">&quot;mineracao_areas_potenciais&quot;</span><span class="p">],</span>
        <span class="s2">&quot;buffer&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="s2">&quot;raster&quot;</span><span class="p">:</span> <span class="kc">None</span>
    <span class="p">},</span>
    <span class="s2">&quot;TURISMO&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;turismo_atividades_esportivas_sul&quot;</span><span class="p">],</span>
        <span class="s2">&quot;buffer&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="s2">&quot;raster&quot;</span><span class="p">:</span> <span class="kc">None</span>
    <span class="p">},</span>
    <span class="s2">&quot;EOLICAS&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;eolico_parques&quot;</span><span class="p">],</span>
        <span class="s2">&quot;buffer&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="s2">&quot;raster&quot;</span><span class="p">:</span> <span class="kc">None</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># call the function</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">output_file</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">setup_stressors</span><span class="p">(</span>
    <span class="n">input_db</span><span class="o">=</span><span class="n">input_db</span><span class="p">,</span>
    <span class="n">folder_output</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span>
    <span class="n">reference_raster</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">input_dir</span><span class="si">}</span><span class="s2">/raster.tif&quot;</span><span class="p">,</span>
    <span class="n">is_blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">1000</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.setup_habitats">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">setup_habitats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_layer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_blank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subfolder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#setup_habitats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.setup_habitats" title="Link to this definition">#</a></dt>
<dd><p>Sets up habitat layers by splitting a vector layer, rasterizing each resulting
habitat group, and reprojecting the rasters to a specified resolution.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This script is a utility for running the <a class="reference external" href="https://naturalcapitalproject.stanford.edu/invest/habitat-risk-assessment">InVEST Habitat Risk model</a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_output</strong> (<em>str</em>) – The base directory where a new run-specific folder for all outputs will be created.</p></li>
<li><p><strong>input_db</strong> (<em>str</em>) – The path to the source vector database (e.g., GeoPackage) containing the habitat features.</p></li>
<li><p><strong>input_layer</strong> (<em>str</em>) – The name of the layer or table within the <code class="docutils literal notranslate"><span class="pre">input_db</span></code> to read the features from.</p></li>
<li><p><strong>groups</strong> (<em>dict</em>) – A dictionary defining the habitat groups: keys are the desired output habitat names (layer names), and values are lists of string values from <code class="docutils literal notranslate"><span class="pre">field_name</span></code> to include in that habitat layer.</p></li>
<li><p><strong>field_name</strong> (<em>str</em>) – The name of the attribute field in the input data used for grouping and querying the habitat features.</p></li>
<li><p><strong>reference_raster</strong> (<em>str</em>) – The path to a raster file whose extent, CRS, and other properties will be used as a template for the output habitat rasters.</p></li>
<li><p><strong>is_blank</strong> (<em>bool</em>) – [optional] If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the <code class="docutils literal notranslate"><span class="pre">reference_raster</span></code> is assumed to be a blank (zero-valued) template already, skipping the internal blanking step. Default value = False</p></li>
<li><p><strong>resolution</strong> (<em>float</em>) – The desired resolution (cell size) for the final output habitat rasters. Default value = 400</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the newly created run-specific output folder containing the habitat rasters and metadata.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>This function orchestrates a multi-step process:</p>
<ol class="arabic simple">
<li><p><strong>Vector Split:</strong> Calls <code class="docutils literal notranslate"><span class="pre">split_features</span></code> to create a temporary GeoPackage where each habitat group is saved as a separate layer.</p></li>
<li><p><strong>Template Raster:</strong> If <code class="docutils literal notranslate"><span class="pre">is_blank</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>, a blank raster is generated from the <code class="docutils literal notranslate"><span class="pre">reference_raster</span></code> to serve as the template for rasterization.</p></li>
<li><p><strong>Rasterization Loop:</strong> Each habitat layer is individually rasterized onto a copy of the template raster, setting the habitat cells to a burn value of 1.</p></li>
<li><p><strong>Reprojection:</strong> The resulting raster is reprojected to the desired <code class="docutils literal notranslate"><span class="pre">resolution</span></code> (and default CRS of 5641).</p></li>
<li><p><strong>Metadata:</strong> An <code class="docutils literal notranslate"><span class="pre">info_habitats.csv</span></code> file is created, detailing the name and file path for each generated habitat raster.</p></li>
</ol>
<p>Temporary files (split GeoPackage and intermediate rasters) are cleaned up at the end.</p>
<p><strong>Script example</strong></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The following script is expected to be executed under the QGIS Python
Environment with <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> installed.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># WARNING: run this in QGIS Python Environment</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">importlib.util</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">iu</span>

<span class="c1"># define the paths to this module</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">the_module</span> <span class="o">=</span> <span class="s2">&quot;path/to/risk.py&quot;</span>

<span class="n">spec</span> <span class="o">=</span> <span class="n">iu</span><span class="o">.</span><span class="n">spec_from_file_location</span><span class="p">(</span><span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="n">the_module</span><span class="p">)</span>
<span class="n">module</span> <span class="o">=</span> <span class="n">iu</span><span class="o">.</span><span class="n">module_from_spec</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
<span class="n">spec</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">exec_module</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>

<span class="c1"># define the paths to input and output folders</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">input_dir</span> <span class="o">=</span> <span class="s2">&quot;path/to/dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s2">&quot;path/to/dir&quot;</span>

<span class="c1"># define the path to input database</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">input_db</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">input_dir</span><span class="si">}</span><span class="s2">/pem.gpkg&quot;</span>

<span class="c1"># organize habitat groups</span>
<span class="n">groups</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;MB3_MC3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MB3&quot;</span><span class="p">,</span> <span class="s2">&quot;MC3&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MB4_MB5_MB6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MB4&quot;</span><span class="p">,</span> <span class="s2">&quot;MB5&quot;</span><span class="p">,</span> <span class="s2">&quot;MB6&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MC4_MC5_MC6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MC4&quot;</span><span class="p">,</span> <span class="s2">&quot;MC5&quot;</span><span class="p">,</span> <span class="s2">&quot;MC6&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MD3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MD3&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MD4_MD5_MD6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MD4&quot;</span><span class="p">,</span> <span class="s2">&quot;MD5&quot;</span><span class="p">,</span> <span class="s2">&quot;MD6&quot;</span><span class="p">],</span>
    <span class="s2">&quot;ME1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ME1&quot;</span><span class="p">],</span>
    <span class="s2">&quot;ME4_MF4_MF5&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ME4&quot;</span><span class="p">,</span> <span class="s2">&quot;MF4&quot;</span><span class="p">,</span> <span class="s2">&quot;MF5&quot;</span><span class="p">],</span>
    <span class="s2">&quot;MG4_MG6&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;MG4&quot;</span><span class="p">,</span> <span class="s2">&quot;MG6&quot;</span><span class="p">],</span>
<span class="p">}</span>

<span class="c1"># call the function</span>
<span class="c1"># ----------------------------------------</span>
<span class="n">output_file</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">setup_habitats</span><span class="p">(</span>
    <span class="n">input_db</span><span class="o">=</span><span class="n">input_db</span><span class="p">,</span>
    <span class="n">folder_output</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
    <span class="n">input_layer</span><span class="o">=</span><span class="s2">&quot;habitats_bentonicos_sul_v2&quot;</span><span class="p">,</span>
    <span class="n">groups</span><span class="o">=</span><span class="n">groups</span><span class="p">,</span>
    <span class="n">field_name</span><span class="o">=</span><span class="s2">&quot;code&quot;</span><span class="p">,</span>
    <span class="n">reference_raster</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">input_dir</span><span class="si">}</span><span class="s2">/raster.tif&quot;</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">1000</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.util_split_features">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">util_split_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_layer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#util_split_features"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.util_split_features" title="Link to this definition">#</a></dt>
<dd><p>Splits features from a source GeoDataFrame into separate
layers within a single GeoPackage file based on predefined groups of field values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folder_output</strong> (<em>str</em>) – The base directory where a new run-specific folder for the outputs will be created.</p></li>
<li><p><strong>input_db</strong> (<em>str</em>) – The path to the source vector database (e.g., a GeoPackage file).</p></li>
<li><p><strong>input_layer</strong> (<em>str</em>) – The name of the layer or table within the <code class="docutils literal notranslate"><span class="pre">input_db</span></code> to read the features from.</p></li>
<li><p><strong>groups</strong> (<em>dict</em>) – A dictionary where keys are the desired output layer names (groups) and values are lists of string values from <code class="docutils literal notranslate"><span class="pre">field_name</span></code> to include in that layer.</p></li>
<li><p><strong>field_name</strong> (<em>str</em>) – The name of the attribute field in the input data used for grouping and querying the features.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the output GeoPackage file containing the newly created layers.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>The function first reads the entire layer into a single GeoDataFrame.
It then iterates through the <code class="docutils literal notranslate"><span class="pre">groups</span></code> dictionary, querying the GeoDataFrame
for features where the value in <code class="docutils literal notranslate"><span class="pre">field_name</span></code> matches any of the values in
the group’s list. All resulting group GeoDataFrames are concatenated and
saved as separate layers (named after the group keys) into a new GeoPackage
file called <code class="docutils literal notranslate"><span class="pre">split.gpkg</span></code> within a run-specific subfolder in <code class="docutils literal notranslate"><span class="pre">folder_output</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.util_raster_blank">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">util_raster_blank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_raster</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#util_raster_blank"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.util_raster_blank" title="Link to this definition">#</a></dt>
<dd><p>Creates a blank (zero-valued) raster based on the extent,
resolution, and CRS of an existing input raster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_raster</strong> (<em>str</em>) – name for the resulting blank raster file (without extension).</p></li>
<li><p><strong>input_raster</strong> (<em>str</em>) – The path to the source raster file whose properties (extent, resolution, CRS) will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The full path to the newly created blank raster file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>This function uses the QGIS processing algorithm <code class="docutils literal notranslate"><span class="pre">native:rastercalc</span></code>
(Raster calculator). It works by multiplying every cell in the input
raster by zero, effectively preserving the metadata (extent, resolution, CRS)
while setting all data values to zero. The output raster is a new
file and does not modify the input raster.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.util_raster_reproject">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">util_raster_reproject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_resolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_crs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'5641'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_crs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'4326'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#util_raster_reproject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.util_raster_reproject" title="Link to this definition">#</a></dt>
<dd><p>Reprojects and optionally resamples an input raster to a new Coordinate Reference System (CRS) and resolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_raster</strong> (<em>str</em>) – The full path and filename for the resulting reprojected raster file.</p></li>
<li><p><strong>input_raster</strong> (<em>str</em>) – The path to the source raster file to be reprojected.</p></li>
<li><p><strong>dst_resolution</strong> (<em>float</em>) – The desired resolution (cell size) for the output raster, usually in the units of the target CRS.</p></li>
<li><p><strong>dst_crs</strong> (<em>str</em>) – The EPSG code (as a string) for the target CRS. Default value = <code class="docutils literal notranslate"><span class="pre">5641</span></code></p></li>
<li><p><strong>src_crs</strong> (<em>str</em>) – The EPSG code (as a string) for the source CRS. Default value = <code class="docutils literal notranslate"><span class="pre">4326</span></code></p></li>
<li><p><strong>dtype</strong> (<em>int</em>) – The desired data type for the output raster bands (GDAL data type code). Default value = 6 (Float32)</p></li>
<li><p><strong>resampling</strong> (<em>int</em>) – The resampling method to use (GDAL resampling code). Default value = 0 (Nearest Neighbour)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The full path to the newly created output raster file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>This function uses the QGIS processing algorithm <code class="docutils literal notranslate"><span class="pre">gdal:warpreproject</span></code>.
The default NoData value is set to <code class="docutils literal notranslate"><span class="pre">-99999</span></code>.
Common values for <code class="docutils literal notranslate"><span class="pre">dtype</span></code> include 1 (Byte), 4 (Int32), 6 (Float32).
Common values for <code class="docutils literal notranslate"><span class="pre">resampling</span></code> include 0 (Nearest Neighbour), 1 (Bilinear), 2 (Cubic).
The output path is constructed using the <code class="docutils literal notranslate"><span class="pre">output_raster</span></code> parameter.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.util_layer_rasterize">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">util_layer_rasterize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_layer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">burn_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#util_layer_rasterize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.util_layer_rasterize" title="Link to this definition">#</a></dt>
<dd><p>Rasterizes a vector layer from a database into an existing raster file, assigning a fixed burn value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_raster</strong> (<em>str</em>) – The path to the existing raster file to be modified (must be writable).</p></li>
<li><p><strong>input_db</strong> (<em>str</em>) – The path or connection string to the vector database (e.g., GeoPackage, PostGIS connection).</p></li>
<li><p><strong>input_layer</strong> (<em>str</em>) – The name of the vector layer or table to rasterize.</p></li>
<li><p><strong>input_table</strong> (<em>str</em><em> or </em><em>None</em>) – [optional] The schema or parent table name if the <code class="docutils literal notranslate"><span class="pre">input_layer</span></code> is a sub-table or view (e.g., for PostGIS).</p></li>
<li><p><strong>burn_value</strong> (<em>int</em><em> or </em><em>float</em>) – The fixed value to burn into the raster cells covered by the vector features. Default value = 1</p></li>
<li><p><strong>extra</strong> (<em>str</em>) – Additional command-line options passed directly to the underlying GDAL tool. Default value = <code class="docutils literal notranslate"><span class="pre">''</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the modified input raster file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>This function uses the QGIS processing algorithm <code class="docutils literal notranslate"><span class="pre">gdal:rasterize_over_fixed_value</span></code>, which modifies the <code class="docutils literal notranslate"><span class="pre">input_raster</span></code> in place. If <code class="docutils literal notranslate"><span class="pre">input_table</span></code> is not provided, it assumes a standard layer format (e.g., GeoPackage layer). If <code class="docutils literal notranslate"><span class="pre">input_table</span></code> is provided, it constructs a PostgreSQL-like table reference.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.util_fuzzify_raster">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">util_fuzzify_raster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#util_fuzzify_raster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.util_fuzzify_raster" title="Link to this definition">#</a></dt>
<dd><p>Applies a linear membership fuzzy set function to a raster, reclassifying values between a low and high bound.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_raster</strong> (<em>str</em>) – Full path to the input raster file.</p></li>
<li><p><strong>output_raster</strong> (<em>str</em>) – Full path for the output fuzzy raster file.</p></li>
<li><p><strong>lo</strong> (<em>float</em><em> or </em><em>int</em>) – [optional] The lower bound for the linear membership function. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, it defaults to the minimum value (or 1st percentile if <code class="docutils literal notranslate"><span class="pre">use_percentiles</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p></li>
<li><p><strong>hi</strong> (<em>float</em><em> or </em><em>int</em>) – [optional] The upper bound for the linear membership function. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, it defaults to the maximum value (or 99th percentile if <code class="docutils literal notranslate"><span class="pre">use_percentiles</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p></li>
<li><p><strong>use_percentiles</strong> (<em>bool</em>) – Use the 1st and 99th percentiles as default bounds instead of the absolute min/max when <code class="docutils literal notranslate"><span class="pre">lo</span></code> or <code class="docutils literal notranslate"><span class="pre">hi</span></code> are <code class="docutils literal notranslate"><span class="pre">None</span></code>. Default value = <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The file path of the resulting fuzzy raster.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>This function uses the QGIS processing algorithm <code class="docutils literal notranslate"><span class="pre">native:fuzzifyrasterlinearmembership</span></code>.
Values in the input raster are reclassified:
- Values $le$ <code class="docutils literal notranslate"><span class="pre">lo</span></code> get a fuzzy membership value of 0.
- Values $ge$ <code class="docutils literal notranslate"><span class="pre">hi</span></code> get a fuzzy membership value of 1.
- Values between <code class="docutils literal notranslate"><span class="pre">lo</span></code> and <code class="docutils literal notranslate"><span class="pre">hi</span></code> are linearly interpolated between 0 and 1.
The internal call to <code class="docutils literal notranslate"><span class="pre">util_get_raster_stats</span></code> is assumed to return ‘p01’ and ‘p99’ keys when <code class="docutils literal notranslate"><span class="pre">full=True</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.util_get_raster_stats">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">util_get_raster_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_raster</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">band</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#util_get_raster_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.util_get_raster_stats" title="Link to this definition">#</a></dt>
<dd><p>Calculates the statistics for a specified band of a given raster file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_raster</strong> (<em>str</em>) – Full path to the input raster file.</p></li>
<li><p><strong>band</strong> (<em>int</em>) – The band number to calculate statistics for. Default value = <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary containing the raster band’s mean, standard deviation, minimum, maximum, sum, and element count.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p><strong>Notes</strong></p>
<p>The function uses QGIS classes internally to read the raster and compute statistics.
The keys in the returned dictionary are <code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">sd</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">sum</span></code>, and <code class="docutils literal notranslate"><span class="pre">count</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pem.risk.util_read_raster">
<span class="sig-prename descclassname"><span class="pre">pem.risk.</span></span><span class="sig-name descname"><span class="pre">util_read_raster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_band</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pem/risk.html#util_read_raster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pem.risk.util_read_raster" title="Link to this definition">#</a></dt>
<dd><p>Read a raster (GeoTIFF) file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_input</strong> (<em>str</em>) – path to raster file</p></li>
<li><p><strong>n_band</strong> (<em>int</em>) – number of the band to read</p></li>
<li><p><strong>metadata</strong> (<em>bool</em>) – option to return</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary with “data” and (optional) “metadata”</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="api.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">API</p>
      </div>
    </a>
    <a class="right-next"
       href="development.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Development</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.compute_risk_index"><code class="docutils literal notranslate"><span class="pre">compute_risk_index()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.setup_hra_model"><code class="docutils literal notranslate"><span class="pre">setup_hra_model()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.setup_stressors"><code class="docutils literal notranslate"><span class="pre">setup_stressors()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.setup_habitats"><code class="docutils literal notranslate"><span class="pre">setup_habitats()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.util_split_features"><code class="docutils literal notranslate"><span class="pre">util_split_features()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.util_raster_blank"><code class="docutils literal notranslate"><span class="pre">util_raster_blank()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.util_raster_reproject"><code class="docutils literal notranslate"><span class="pre">util_raster_reproject()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.util_layer_rasterize"><code class="docutils literal notranslate"><span class="pre">util_layer_rasterize()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.util_fuzzify_raster"><code class="docutils literal notranslate"><span class="pre">util_fuzzify_raster()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.util_get_raster_stats"><code class="docutils literal notranslate"><span class="pre">util_get_raster_stats()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pem.risk.util_read_raster"><code class="docutils literal notranslate"><span class="pre">util_read_raster()</span></code></a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/risk.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Iporã Possantti.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>